# SendSign Environment Configuration
# Copy this file to .env and fill in your values

# ═══════════════════════════════════════════════════════════════════════════════
# DATABASE
# ═══════════════════════════════════════════════════════════════════════════════

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://sendsign:password@localhost:5432/sendsign

# ═══════════════════════════════════════════════════════════════════════════════
# APPLICATION
# ═══════════════════════════════════════════════════════════════════════════════

# Node environment (development, production, test)
NODE_ENV=development

# Port for the API server
PORT=3000

# Base URL where the application is accessible
# Important: Update this in production (e.g., https://sendsign.yourdomain.com)
BASE_URL=http://localhost:3000

# Legacy API key (for backward compatibility)
# Note: Use per-organization API keys generated through the admin panel instead
API_KEY=dev_api_key_change_in_production

# ═══════════════════════════════════════════════════════════════════════════════
# AUTHENTICATION & SECURITY
# ═══════════════════════════════════════════════════════════════════════════════

# JWT secret for session tokens
# Generate with: openssl rand -hex 32
JWT_SECRET=change_me_in_production_use_openssl_rand_hex_32

# JWT expiration time (e.g., 7d, 24h, 60m)
JWT_EXPIRY=7d

# Encryption key for documents at rest (AES-256-GCM)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=change_me_in_production_use_openssl_rand_hex_32

# OAuth Login (Optional - if not set, email/password still works)
# Google OAuth: Create credentials at https://console.cloud.google.com/apis/credentials
# Authorized redirect URI: https://your-domain.com/app/auth/google/callback
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# GitHub OAuth: Create OAuth app at https://github.com/settings/developers
# Authorization callback URL: https://your-domain.com/app/auth/github/callback
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# ═══════════════════════════════════════════════════════════════════════════════
# DOCUMENT STORAGE
# ═══════════════════════════════════════════════════════════════════════════════

# Storage backend: 'local' or 's3'
STORAGE_TYPE=local

# Local filesystem storage path (only used if STORAGE_TYPE=local)
STORAGE_PATH=./storage

# S3-compatible storage (only needed if STORAGE_TYPE=s3)
# Works with AWS S3, MinIO, Backblaze B2, DigitalOcean Spaces, etc.
S3_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=sendsign-documents
S3_ACCESS_KEY=your_access_key
S3_SECRET_KEY=your_secret_key
S3_REGION=us-east-1

# ═══════════════════════════════════════════════════════════════════════════════
# PDF SIGNING CERTIFICATES
# ═══════════════════════════════════════════════════════════════════════════════

# Self-signed certificates for PDF digital signatures
# These will be auto-generated on first run if not provided
SIGNING_CERT_PATH=./certs/signing-cert.pem
SIGNING_KEY_PATH=./certs/signing-key.pem

# ═══════════════════════════════════════════════════════════════════════════════
# EMAIL NOTIFICATIONS
# ═══════════════════════════════════════════════════════════════════════════════

# Option 1: SendGrid (recommended)
SENDGRID_API_KEY=SG.xxxxx
SENDGRID_FROM_EMAIL=noreply@sendsign.dev
SENDGRID_FROM_NAME=SendSign

# Option 2: SMTP (alternative)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=your_sendgrid_api_key_or_smtp_password
SMTP_FROM=noreply@sendsign.dev

# Note: If neither SendGrid nor SMTP is configured, emails will be logged to console

# ═══════════════════════════════════════════════════════════════════════════════
# SMS NOTIFICATIONS (Optional)
# ═══════════════════════════════════════════════════════════════════════════════

# Twilio credentials (for SMS and WhatsApp)
TWILIO_ACCOUNT_SID=ACxxxxx
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_FROM=+15551234567

# WhatsApp (via Twilio - optional)
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886

# Twilio Verify (for OTP verification - optional)
TWILIO_VERIFY_SERVICE_SID=VAxxxxx

# ═══════════════════════════════════════════════════════════════════════════════
# STRIPE BILLING (Optional - only for managed hosting)
# ═══════════════════════════════════════════════════════════════════════════════

# Stripe API keys (get from https://dashboard.stripe.com)
STRIPE_SECRET_KEY=sk_test_xxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Stripe price ID for the $29/mo managed plan
# Create a product in Stripe Dashboard, then paste the price ID here
STRIPE_PRICE_ID=price_xxxxx

# ═══════════════════════════════════════════════════════════════════════════════
# CONTROL PLANE (Multi-tenant management)
# ═══════════════════════════════════════════════════════════════════════════════

# Master API key for control plane endpoints
# Generate with: openssl rand -hex 32
# IMPORTANT: Keep this secret! It gives full access to all tenants.
SENDSIGN_CONTROL_API_KEY=ctrl_dev_key_change_in_production

# Base domain for tenant subdomains (managed hosting only)
# Example: If set to "sendsign.dev", tenant "acme" gets acme.sendsign.dev
SENDSIGN_BASE_DOMAIN=localhost
SENDSIGN_BASE_URL=http://localhost:3000

# ═══════════════════════════════════════════════════════════════════════════════
# POLICIES & LIMITS
# ═══════════════════════════════════════════════════════════════════════════════

# Document retention period (days)
# Documents older than this will be eligible for deletion
RETENTION_PERIOD_DAYS=2555

# Reminder interval (hours)
# How often to send reminder emails to pending signers
REMINDER_INTERVAL_HOURS=48

# Signing link expiration (hours)
# How long signing links remain valid
SIGNING_TOKEN_EXPIRY_HOURS=72

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ═══════════════════════════════════════════════════════════════════════════════
# WHITE-LABEL BRANDING (Optional - commercial license required)
# ═══════════════════════════════════════════════════════════════════════════════

# Branding entitlement key
# Without this key, "Powered by SendSign" badge remains visible
# Contact enterprise@sendsign.dev for commercial licenses
SENDSIGN_BRANDING_ENTITLEMENT=

# ═══════════════════════════════════════════════════════════════════════════════
# ADVANCED IDENTITY VERIFICATION (Optional - for AES compliance)
# ═══════════════════════════════════════════════════════════════════════════════

# Jumio (government ID verification)
JUMIO_API_KEY=
JUMIO_API_SECRET=

# OR Onfido (alternative)
ONFIDO_API_TOKEN=

# ═══════════════════════════════════════════════════════════════════════════════
# QES - QUALIFIED ELECTRONIC SIGNATURES (Optional - for EU eIDAS compliance)
# ═══════════════════════════════════════════════════════════════════════════════

# QES provider: 'swisscom' or 'namirial'
QES_PROVIDER=

# Swisscom AIS (Switzerland)
SWISSCOM_AIS_URL=https://ais.swisscom.com
SWISSCOM_AIS_KEY=
SWISSCOM_AIS_CERT_PATH=

# OR Namirial (Italy/EU)
NAMIRIAL_API_URL=https://api.namirial.com
NAMIRIAL_API_KEY=

# ═══════════════════════════════════════════════════════════════════════════════
# SSO - SINGLE SIGN-ON (Optional - for enterprise deployments)
# ═══════════════════════════════════════════════════════════════════════════════

# Enable SSO (SAML 2.0 or OIDC)
SSO_ENABLED=false

# SAML 2.0
SSO_SP_ENTITY_ID=https://sendsign.yourdomain.com
SSO_SP_CERT_PATH=./certs/saml-sp-cert.pem
SSO_SP_KEY_PATH=./certs/saml-sp-key.pem

# OIDC (OpenID Connect)
OIDC_ISSUER=https://accounts.google.com
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=

# ═══════════════════════════════════════════════════════════════════════════════
# CORS & SECURITY
# ═══════════════════════════════════════════════════════════════════════════════

# Allowed CORS origins (comma-separated)
# In production, restrict this to your actual domains
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ═══════════════════════════════════════════════════════════════════════════════
# LOGGING
# ═══════════════════════════════════════════════════════════════════════════════

# Log level: 'error', 'warn', 'info', 'debug'
LOG_LEVEL=info
